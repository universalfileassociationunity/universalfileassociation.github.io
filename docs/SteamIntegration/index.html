



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Deeplinking and Domain Association plugin for Unity">
      
      
        <link rel="canonical" href="https://universaldeeplinking.imaginationoverflow.com/SteamIntegration/">
      
      
        <meta name="author" content="ImaginationOverflow - Ana Correia & Diogo Cardoso">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.9.2">
    
    
      
        <title>Steam Integration - Universal Deeplinking</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.ba0fd1a6.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#configuring-steam-integration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://universaldeeplinking.imaginationoverflow.com" title="Universal Deeplinking" class="md-header-nav__button md-logo">
          
            <img src="../images/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Universal Deeplinking
              </span>
              <span class="md-header-nav__topic">
                Steam Integration
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/logo.svg" width="48" height="48">
      
    </span>
    Universal Deeplinking
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../GettingStarted/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../DomainAssociation/" title="Domain Association" class="md-nav__link">
      Domain Association
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Steam Integration
      </label>
    
    <a href="./" title="Steam Integration" class="md-nav__link md-nav__link--active">
      Steam Integration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-steam-integration" title="Configuring Steam Integration" class="md-nav__link">
    Configuring Steam Integration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mac-and-steam-integration" title="Mac and Steam Integration" class="md-nav__link">
    Mac and Steam Integration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution-suggestion" title="Solution Suggestion" class="md-nav__link">
    Solution Suggestion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Internals/" title="Inside the Plugin" class="md-nav__link">
      Inside the Plugin
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Showcase/" title="Showcase" class="md-nav__link">
      Showcase
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../About/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-steam-integration" title="Configuring Steam Integration" class="md-nav__link">
    Configuring Steam Integration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mac-and-steam-integration" title="Mac and Steam Integration" class="md-nav__link">
    Mac and Steam Integration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution-suggestion" title="Solution Suggestion" class="md-nav__link">
    Solution Suggestion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Steam Integration</h1>
                
                <p>Regular Standalone Deep Linking opens up your game when someone clicks on a custom defined URI. But if your game is on Steam you are probably using its SDK or DRM capabilities to further enhance your players' experience.</p>
<p>If you open a Steam game from its installation folder, since it wasn't open via steam it probably won't be able to communicate with valve software in order to report achievements, stats, etc, or it won't simply launch due to the DRM feature.</p>
<p>So using the regular Deep Linking mechanism where we associate a custom URI to a game executable wouldn't work since the game would possibly lose functionality or simply wouldn't start.</p>
<p>To avoid this issue, instead of registering your game to your custom URI, we configure the target systems to open steam instead of your game, but we parameterize Steam to open your game as soon as it's initialized.</p>
<h2 id="configuring-steam-integration">Configuring Steam Integration<a class="headerlink" href="#configuring-steam-integration" title="Permanent link">&para;</a></h2>
<p>To enable the Steam capability of ImaginationOverflow Deep Linking Plugin you first need to have a valid app id, for that you need to get access to <a href="https://partner.steamgames.com/steamdirect">Steam Direct</a>. After that valve will attribute to your game an ID.</p>
<p><img alt="szvid.png" src="../imgs/1957370786-szvid.png" /></p>
<p>As an example, Sudoku Zenkai id is <strong>809850</strong>. </p>
<p>Then you need to configure the plugin with this id:</p>
<p><img alt="steamint.png" src="../imgs/2925578033-steamint.png" /></p>
<p>The final step of the configuration to enable the Steam integration is setting the <em>IsSteamBuild</em> Property under <strong>DeepLinkManager</strong>:</p>
<div class="codehilite"><pre><span></span><span class="n">ImaginationOverflow</span><span class="p">.</span><span class="n">UniversalDeepLinking</span><span class="p">.</span><span class="n">DeepLinkManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">IsSteamBuild</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
</pre></div>

<p>If your game is on Steam there is a good chance that you offer DRM-free versions of it on other stores, so don't forget to turn off this option when making DRM-free standalone builds, a good way to do this automatically is using <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/preprocessor-directives/preprocessor-if">compilation flags</a>.</p>
<div class="codehilite"><pre><span></span><span class="cp">#if STEAM_BUILD</span>
<span class="n">ImaginationOverflow</span><span class="p">.</span><span class="n">UniversalDeepLinking</span><span class="p">.</span><span class="n">DeepLinkManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">IsSteamBuild</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="cp">#else</span>
<span class="n">ImaginationOverflow</span><span class="p">.</span><span class="n">UniversalDeepLinking</span><span class="p">.</span><span class="n">DeepLinkManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">IsSteamBuild</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
<span class="cp">#endif</span>
</pre></div>

<h2 id="mac-and-steam-integration">Mac and Steam Integration<a class="headerlink" href="#mac-and-steam-integration" title="Permanent link">&para;</a></h2>
<p>Mac Deep Linking works a little different from the Windows and Linux, you have to take special care when integrating the plugin with Mac and Steam. On Linux and Windows, the plugin handles the registration of the Deep Link when the game is first open. This enables the plugin to register whatever it wants on these platforms. On Mac, the Deep Link feature is fully controlled by the OS and the plugin can't change the default configuration, which opens your game directly.</p>
<p>The OS itself doesn't know that is running a Steam game, so when the user clicks on a custom URI, the OS opens the game executable. This means that you need to explicitly delay the enforcement of the DRM until you know if the game was activated via Deep Linking or not.</p>
<p>The plugin is configured in a way that when it's running a Steam game on MacOS <strong>it will always</strong> fire the LinkActivated event even if the game wasn't activated via Deep Link. This way is possible to store the Deep Link before enforcing any DRM in the game. </p>
<h3 id="solution-suggestion">Solution Suggestion<a class="headerlink" href="#solution-suggestion" title="Permanent link">&para;</a></h3>
<p>Below is the code that we use on Sudoku Zenkai to handle this tricky issue, for Steam integration we are using <a href="https://steamworks.github.io/">Steamworks.NET</a>.</p>
<p>The user flow for this situation is the following:</p>
<ol>
<li>User clicks on a Deep Link.</li>
<li>The game opens</li>
<li>The game enforces DRM and launches the game on Steam.</li>
<li>Steam launches (if not already running).</li>
<li>Steam launches the game.</li>
</ol>
<p>To ensure that we process the Deep Link that the user initially clicked we need to save it before enforcing the DRM, in the code below we do exactly that:</p>
<ol>
<li>The game is activated via Deep Link.</li>
<li>The LinkActivated event is triggered.</li>
<li>Save the link information (since it's impossible to have the game launch on steam via Deep Link)</li>
<li>Check if the game has steam access, if not restart.</li>
<li>If we are already on steam, load the previously saved Deep Link</li>
<li>Resume Deep Link activation.</li>
</ol>
<p>This behavior is only possible because <strong>the plugin always triggers</strong> the LinkActivated event (on Steam Mac builds) regardless if it was activated via a Deep Link or not.</p>
<div class="codehilite"><pre><span></span>    <span class="k">public</span> <span class="k">void</span> <span class="nf">RegisterForActivation</span><span class="p">()</span>
    <span class="p">{</span>
<span class="cp">#if UNITY_STANDALONE_OSX &amp;&amp; STEAM_BUILD</span>
        <span class="n">DeepLinkManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">LinkActivated</span> <span class="p">+=</span> <span class="n">SteamOsxActivation</span><span class="p">;</span>
<span class="cp">#else</span>
        <span class="n">DeepLinkManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">LinkActivated</span> <span class="p">+=</span> <span class="n">Instance_LinkActivated</span><span class="p">;</span>
<span class="cp">#endif</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">SteamOsxActivation</span><span class="p">(</span><span class="n">LinkActivation</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//</span>
        <span class="c1">//  On Steam OSX builds the plugin triggers the LinkActivated with the  </span>
        <span class="c1">//  deep link data or with a null Uri if it wasn&#39;t activated </span>
        <span class="c1">//  via Deep Linking</span>
        <span class="c1">//</span>
        <span class="k">if</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">Uri</span><span class="p">)</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
            <span class="n">YourGameStorage</span><span class="p">.</span><span class="n">SaveDeepLinkActivation</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>

        <span class="c1">//</span>
        <span class="c1">//  Enforce DRM</span>
        <span class="c1">//</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Steamworks</span><span class="p">.</span><span class="n">SteamAPI</span><span class="p">.</span><span class="n">RestartAppIfNecessary</span><span class="p">(</span><span class="k">new</span> <span class="n">Steamworks</span><span class="p">.</span><span class="n">AppId_t</span><span class="p">([</span><span class="n">YourAppId</span><span class="p">])))</span>
        <span class="p">{</span>
            <span class="n">Application</span><span class="p">.</span><span class="n">Quit</span><span class="p">();</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//</span>
        <span class="c1">//  We are already running on Steam, so load any saved deep linking </span>
        <span class="c1">//  activations</span>
        <span class="c1">//</span>
        <span class="n">s</span> <span class="p">=</span> <span class="n">YourGameStorage</span><span class="p">.</span><span class="n">LoadDeepLinkActivation</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="k">return</span><span class="p">;</span>

        <span class="c1">//</span>
        <span class="c1">//  Clear the activation ensuring that the game won&#39;t be activated again </span>
        <span class="c1">//  with the same uri this depends on your storage infrastructure.</span>
        <span class="c1">//  </span>
        <span class="n">YourGameStorage</span><span class="p">.</span><span class="n">ClearDeepLinkActivation</span><span class="p">();</span>

        <span class="c1">//</span>
        <span class="c1">//  Process deep link activation</span>
        <span class="c1">//</span>
        <span class="n">Instance_LinkActivated</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>

<p>This behavior only happens when the game is running on Mac and you set the Steam flag to true, on the other combinations the plugin only fires the LinkActivated event in case of an actual activation.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../DomainAssociation/" title="Domain Association" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Domain Association
              </span>
            </div>
          </a>
        
        
          <a href="../Internals/" title="Inside the Plugin" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Inside the Plugin
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 ImaginationOverflow
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://imaginationoverflow.com" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://twitter.com/ImaginationOver" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.facebook.com/imaginationoverflowpt/" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://store.steampowered.com/developer/imaginationoverflow" class="md-footer-social__link fa fa-steam"></a>
    
      <a href="https://play.google.com/store/apps/dev?id=4645635746246236605" class="md-footer-social__link fa fa-android"></a>
    
      <a href="https://itunes.apple.com/us/developer/diogo-cardoso/id1294879672" class="md-footer-social__link fa fa-apple"></a>
    
      <a href="https://www.microsoft.com/en-us/search/shop?q=ImaginationOverflow" class="md-footer-social__link fa fa-windows"></a>
    
      <a href="https://discord.gg/5TYmJtY" class="md-footer-social__link fa fa-support"></a>
    
      <a href="mailto:contact@imaginationoverflow.com" class="md-footer-social__link fa fa-mail-reply"></a>
    
      <a href="https://www.linkedin.com/in/diogocardoso89/" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://www.patreon.com/imaginationoverflow/posts" class="md-footer-social__link fa fa-feed"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:".."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-41424791-23","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>